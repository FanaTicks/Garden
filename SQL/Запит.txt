USE Garden;

DROP TABLE IF EXISTS Acount;
CREATE TABLE Acount(
    Id_Acount INT AUTO_INCREMENT PRIMARY KEY,
    Login_Acount CHAR(100) NOT NULL,
    Password_Acount CHAR(100) NOT NULL,
    Hash_Acount VARCHAR(32) NOT NULL DEFAULT '',
    Ip_Acount INT NOT NULL DEFAULT 0
) ENGINE=MyISAM DEFAULT CHARSET=cp1251 AUTO_INCREMENT=1 ;

DROP TABLE IF EXISTS Sowing;
CREATE TABLE Sowing(
    Id_Sowing INT AUTO_INCREMENT PRIMARY KEY,
    Name_Sowing CHAR(100),
    Number_Of_Plots_Area INT,
    ID_Acount INT NOT NULL,
    FOREIGN KEY (ID_Acount) REFERENCES Acount(Id_Acount) ON DELETE CASCADE
) ENGINE=MyISAM DEFAULT CHARSET=cp1251 AUTO_INCREMENT=1 ;

DROP TABLE IF EXISTS Area;
CREATE TABLE Area(
    Id_Area INT AUTO_INCREMENT PRIMARY KEY,
    Number_Of_Lines_Area INT,
    ID_Sowing INT NOT NULL,
    FOREIGN KEY (ID_Sowing) REFERENCES Sowing(Id_Sowing) ON DELETE CASCADE
) ENGINE=MyISAM DEFAULT CHARSET=cp1251 AUTO_INCREMENT=1 ;

DROP TABLE IF EXISTS Culture;
CREATE TABLE Culture(
    Id_Culture INT AUTO_INCREMENT PRIMARY KEY,
    Name_Culture CHAR(100)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251 AUTO_INCREMENT=1 ;

DROP TABLE IF EXISTS Seed;
CREATE TABLE Seed(
    Id_Seed INT AUTO_INCREMENT PRIMARY KEY,
    Name_Seed CHAR(100),
    ID_Culture INT NOT NULL,
    FOREIGN KEY (ID_Culture) REFERENCES Culture(Id_Culture) ON DELETE CASCADE
) ENGINE=MyISAM DEFAULT CHARSET=cp1251 AUTO_INCREMENT=1 ;

DROP TABLE IF EXISTS Line;
CREATE TABLE Line(
    Id_Line INT AUTO_INCREMENT PRIMARY KEY,
    ID_Seed INT NOT NULL,
    ID_Area INT NOT NULL,
    ID_Culture INT NOT NULL,
    FOREIGN KEY (ID_Culture) REFERENCES Culture(Id_Culture) ON DELETE CASCADE,
    FOREIGN KEY (ID_Seed) REFERENCES Seed(Id_Seed) ON DELETE CASCADE,
    FOREIGN KEY (ID_Area) REFERENCES Area(Id_Area) ON DELETE CASCADE
) ENGINE=MyISAM DEFAULT CHARSET=cp1251 AUTO_INCREMENT=1 ;

DROP TABLE IF EXISTS Fertilizers;
CREATE TABLE Fertilizers(
    ID_fertilizer INT AUTO_INCREMENT PRIMARY KEY,
    Name_fertilizer CHAR(100) NOT NULL,
    ID_Culture INT NOT NULL,
    FOREIGN KEY (ID_Culture) REFERENCES Culture(Id_Culture) ON DELETE CASCADE
) ENGINE=MyISAM DEFAULT CHARSET=cp1251 AUTO_INCREMENT=1;

DROP TABLE IF EXISTS Evaluation;
CREATE TABLE Evaluation(
    ID_Evaluation INT AUTO_INCREMENT PRIMARY KEY,
    ID_fertilizer INT NOT NULL,
    Assessment INT NOT NULL CHECK (Assessment >= 0 AND Assessment <= 10),
    Description TEXT,
    FOREIGN KEY (ID_fertilizer) REFERENCES Fertilizers(ID_fertilizer) ON DELETE CASCADE
) ENGINE=MyISAM DEFAULT CHARSET=cp1251 AUTO_INCREMENT=1;


